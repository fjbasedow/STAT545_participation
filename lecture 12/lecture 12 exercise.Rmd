---
title: "cm012 Exercises: Factors"
output: github_document
editor_options:
  chunk_output_type: inline
---

`forcats` package comes loaded with `tiyverse`:

```{r}
suppressPackageStartupMessages(library(tidyverse))
library(gapminder)
```

# Factors

## Resources

- Exercises are based on http://stat545.com/block029_factors.html and http://r4ds.had.co.nz/factors.html. Some content was taken from the former.

## Intro to Factors

What is a factor? A "truly categorical" variable. You can think of it as a vector that:

- has character entries on the surface
- are integers underneath
- has __levels__

Examples of Base R's obsession with coercing to factors:

```{r}
data.frame(x=c("A", "B")) %>% 
  str()
```


```{r}
lotr1 <- "https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Fellowship_Of_The_Ring.csv" %>% 
  read.csv()
lotr2 <- "https://raw.githubusercontent.com/jennybc/lotr-tidy/master/data/The_Return_Of_The_King.csv" %>% 
  read.csv()
str(lotr1)
str(lotr2)
```


Examples of problems encountered with factors. (ideas came from [R Bloggers](https://www.r-bloggers.com/factors-are-not-first-class-citizens-in-r/))

```{r}
iris %>% 
  mutate(Species = ifelse(Species == "versicolor", "vers", Species))
```

```{r}
c(iris$Species, "setosa")
```


- Base R way of interacting with factors:
    - `factor()`, or `forcats::parse_factor()`.
    - `levels()`
    - `nlevels()`
    - `forcats::fct_count()`

Here is a sample of 10 letters drawn from the possibilities "a", "b", and "c":

```{r}
set.seed(10)
(draw <- sample(letters[1:3], size = 10, replace = TRUE))
```

Convert `draw` to a factor. What are the levels? How many are there? How many of each category was drawn?

```{r}
